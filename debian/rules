#!/usr/bin/make -f
# -*- makefile -*-
# Uncomment this to turn on verbose mode.
# export DH_VERBOSE=1

# see FEATURE AREAS in dpkg-buildflags(1)
export DEB_BUILD_MAINT_OPTIONS = hardening=+all

# see ENVIRONMENT in dpkg-buildflags(1)
# package maintainers to append CFLAGS
#export DEB_CFLAGS_MAINT_APPEND  = -Wall -pedantic
# package maintainers to append LDFLAGS
export DEB_LDFLAGS_MAINT_APPEND =

include /usr/share/dpkg/pkg-info.mk

%:
	dh $@

override_dh_auto_configure:
	dh_auto_configure -- \
	        --enable-glib \
	        --enable-ecore \
	        --enable-doxygen-docs \
	        $(NULL)

execute_before_dh_install:
	# Install documentation:
	# Upstream dumps everything generated by doxygen into a tarball,
	# so we need to untar it and install everything into the right place
	tar xjf $(CURDIR)/libdbus-c---$(DEB_VERSION_UPSTREAM)-doc.tar.bz2
	mkdir -p $(CURDIR)/debian/tmp/usr/share/doc/libdbus-c++-doc/
	mv libdbus-c---$(DEB_VERSION_UPSTREAM)-doc/* \
	   $(CURDIR)/debian/tmp/usr/share/doc/libdbus-c++-doc/

override_dh_strip:
	dh_strip --dbgsym-migration='libdbus-c++-dbg (<< 0.9.0-9~)'
